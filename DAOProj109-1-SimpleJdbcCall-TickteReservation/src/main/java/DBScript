SQL> CREATE TABLE TICKTE_RESERVATION (PSNGR_ID NUMBER(5),PSNGR_NAME VARCHAR2(20),PSNGR_MOB NUMBER(10),JOURNEY_SOURCE VARCHAR2(20),JOURNEY_DESTINATION VARCHAR2(20));

 SELECT * FROM TICKTE_RESERVATION;

  PSNGR_ID		  PSNGR_NAME            PSNGR_MOB 			JOURNEY_SOURCE    	JOURNEY_DESTINATION
-----------------   --------------------				 -------------------- 	 	 -------------------------------    ----------------------------------------
    101					PANKAJ            		   8978524922					 HYD 								BLS
    102	 			    HIMANSHU        	   9944563125					 HYD        						BBSR
	103					MONMATHA			   99488								 HYD								BBSR
	

// CREATE PROCEDURE

CREATE OR REPLACE PROCEDURE P_GET_PASSENGER_DETAILS (PID IN NUMBER, PNAME OUT VARCHAR2, MOB OUT LONG, SOURCE OUT VARCHAR2, DESTINATION OUT VARCHAR2)
AS
BEGIN
SELECT PSNGR_NAME,PSNGR_MOB,JOURNEY_SOURCE,JOURNEY_DESTINATION INTO PNAME,MOB,SOURCE,DESTINATION FROM TICKTE_RESERVATION WHERE PSNGR_ID = PID;
END;
/




//FUNCTION 1
CREATE OR REPLACE FUNCTION FX_GET_PASSENGER_DETAILS(PID IN NUMBER)
    RETURN SYS_REFCURSOR AS
    	DETAILS SYS_REFCURSOR;    
   BEGIN
   	 OPEN DETAILS FOR
    	 SELECT  PSNGR_NAME,PSNGR_MOB,JOURNEY_SOURCE,JOURNEY_DESTINATION FROM TICKTE_RESERVATION WHERE PSNGR_ID = PID;
      RETURN DETAILS;
   END FX_GET_PASSENGER_DETAILS;
   /
   
   
   


//FUNCTION 2
CREATE OR REPLACE FUNCTION FX_GET_PASSENGER_DETAILS(PID IN INTEGER
    )
    RETURN VARCHAR
    IS
    PNAME VARCHAR2(20);
    MOB NUMBER;
    SOURCE VARCHAR2(20);
    DESTINATION VARCHAR2(20);
  
   BEGIN
       -- get total sales
     SELECT  PSNGR_NAME,PSNGR_MOB,JOURNEY_SOURCE,JOURNEY_DESTINATION INTO PNAME,MOB,SOURCE,DESTINATION FROM TICKTE_RESERVATION WHERE PSNGR_ID = PID;
 
       -- return the total sales
       RETURN PID||' '||PNAME||' '||MOB||' '||SOURCE||' '||DESTINATION;
   END;
   /
   
   
   
   
   
   
